<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>单例模式2</title>
</head>
<body>

	<!--单例模式2：为了把 instance 封装起来，我们使用了自执行的匿名函数和闭包，
	并且让这个匿名函数返回真正的 Singleton 构造方法，这增加了一些程序的复杂度，阅读起来也不是很舒服。-->

	<!--单例模式2的写法-->
	<script>
		var CreateDiv = (function () {
			var instance;
			var CreateDiv = function (html) {
				if(instance){
					return instance;
				}
				this.html = html;
				this.init();
				return instance = this;
			};
			CreateDiv.prototype.init = function () {
				var div = document.createElement('div');
				div.innerHTML = this.html;
				document.body.appendChild(div);
			};
			return CreateDiv;
		})();
		var a = new CreateDiv('sven1');
		var b = new CreateDiv('sven2');
		console.log(a === b);
	</script>

</body>
</html>